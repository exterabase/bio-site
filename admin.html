<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ê–¥–º–∏–Ω–∫–∞ - InstallerX Bio</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="theme-purple">

<div class="stars-container" id="stars"></div>

<div class="admin-container">
  <div class="admin-header">
    <h1>‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞ Bio Pro</h1>
    <p>–£–ø—Ä–∞–≤–ª—è–π —Å–≤–æ–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π</p>
    <a href="index.html" class="preview-link" target="_blank">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</a>
  </div>

  <!-- –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò -->
  <div class="section">
    <h2>üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    
    <div class="form-group">
      <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</label>
      <input type="text" id="title" placeholder="–ú–æ—ë –±–∏–æ">
    </div>

    <div class="form-group">
      <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
      <textarea id="description" placeholder="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –º–æ—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!"></textarea>
    </div>

    <div class="form-group">
      <label>–ê–≤–∞—Ç–∞—Ä–∫–∞ (URL)</label>
      <input type="url" id="avatar" placeholder="https://example.com/avatar.jpg">
    </div>

    <div class="checkbox-group">
      <input type="checkbox" id="showQR">
      <label for="showQR">–ü–æ–∫–∞–∑–∞—Ç—å QR –∫–æ–¥</label>
    </div>

    <button class="btn" onclick="saveMain()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ</button>
  </div>

  <!-- –í–´–ë–û–† –¢–ï–ú–´ -->
  <div class="section">
    <h2>üé® –¶–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞</h2>
    <div class="color-options">
      <div class="color-option" data-theme="purple" onclick="selectTheme('purple')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        –§–∏–æ–ª–µ—Ç–æ–≤–∞—è
      </div>
      <div class="color-option" data-theme="blue" onclick="selectTheme('blue')" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
        –°–∏–Ω—è—è
      </div>
      <div class="color-option" data-theme="green" onclick="selectTheme('green')" style="background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
        –ó–µ–ª—ë–Ω–∞—è
      </div>
      <div class="color-option" data-theme="sunset" onclick="selectTheme('sunset')" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
        –ó–∞–∫–∞—Ç
      </div>
    </div>
  </div>

  <!-- –î–û–ë–ê–í–õ–ï–ù–ò–ï –ë–õ–û–ö–û–í -->
  <div class="section">
    <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫</h2>
    
    <div class="form-group">
      <label>–¢–∏–ø –±–ª–æ–∫–∞</label>
      <select id="blockType" onchange="updateBlockForm()">
        <option value="link">üîó –°—Å—ã–ª–∫–∞</option>
        <option value="text">üìù –¢–µ–∫—Å—Ç</option>
        <option value="quote">üí¨ –¶–∏—Ç–∞—Ç–∞</option>
        <option value="video">üé• –í–∏–¥–µ–æ</option>
        <option value="image">üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</option>
        <option value="counter">üìä –°—á—ë—Ç—á–∏–∫</option>
        <option value="music">üéµ –ú—É–∑—ã–∫–∞</option>
        <option value="divider">‚ûñ –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å</option>
      </select>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Å—Å—ã–ª–∫–∏ -->
    <div id="form-link" class="block-form">
      <div class="form-group">
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏</label>
        <input type="text" id="link-name" placeholder="–ú–æ–π Telegram">
      </div>
      <div class="form-group">
        <label>URL</label>
        <input type="url" id="link-url" placeholder="https://t.me/username">
      </div>
      <div class="form-group">
        <label>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</label>
        <select id="link-platform">
          <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
          <option value="telegram">Telegram</option>
          <option value="discord">Discord</option>
          <option value="instagram">Instagram</option>
          <option value="youtube">YouTube</option>
          <option value="twitter">Twitter/X</option>
          <option value="github">GitHub</option>
          <option value="tiktok">TikTok</option>
          <option value="vk">VK</option>
          <option value="whatsapp">WhatsApp</option>
        </select>
      </div>
      <div class="form-group">
        <label>–¢–∏–ø –∏–∫–æ–Ω–∫–∏</label>
        <select id="link-iconType">
          <option value="svg">SVG (–ª–æ–≥–æ—Ç–∏–ø)</option>
          <option value="emoji">–≠–º–æ–¥–∑–∏</option>
        </select>
      </div>
      <div class="form-group" id="emoji-input" style="display:none;">
        <label>–≠–º–æ–¥–∑–∏</label>
        <input type="text" id="link-icon" placeholder="üîó">
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ -->
    <div id="form-text" class="block-form" style="display:none;">
      <div class="form-group">
        <label>–¢–µ–∫—Å—Ç</label>
        <textarea id="text-content" placeholder="–í–∞—à —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å..."></textarea>
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Ü–∏—Ç–∞—Ç—ã -->
    <div id="form-quote" class="block-form" style="display:none;">
      <div class="form-group">
        <label>–¢–µ–∫—Å—Ç —Ü–∏—Ç–∞—Ç—ã</label>
        <textarea id="quote-content" placeholder="–í–∞—à–∞ —Ü–∏—Ç–∞—Ç–∞..."></textarea>
      </div>
      <div class="form-group">
        <label>–ê–≤—Ç–æ—Ä (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
        <input type="text" id="quote-author" placeholder="–ê–≤—Ç–æ—Ä —Ü–∏—Ç–∞—Ç—ã">
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤–∏–¥–µ–æ -->
    <div id="form-video" class="block-form" style="display:none;">
      <div class="form-group">
        <label>URL –≤–∏–¥–µ–æ</label>
        <input type="url" id="video-url" placeholder="https://example.com/video.mp4">
      </div>
      <div class="checkbox-group">
        <input type="checkbox" id="video-autoplay">
        <label for="video-autoplay">–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–±–µ–∑ –∑–≤—É–∫–∞)</label>
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <div id="form-image" class="block-form" style="display:none;">
      <div class="form-group">
        <label>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
        <input type="url" id="image-url" placeholder="https://example.com/image.jpg">
      </div>
      <div class="form-group">
        <label>–ü–æ–¥–ø–∏—Å—å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
        <input type="text" id="image-caption" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Å—á—ë—Ç—á–∏–∫–∞ -->
    <div id="form-counter" class="block-form" style="display:none;">
      <div class="form-group">
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="counter-label" placeholder="–ü–æ–¥–ø–∏—Å—á–∏–∫–∏">
      </div>
      <div class="form-group">
        <label>–ó–Ω–∞—á–µ–Ω–∏–µ</label>
        <input type="text" id="counter-value" placeholder="10.5K">
      </div>
      <div class="form-group">
        <label>–ò–∫–æ–Ω–∫–∞ (—ç–º–æ–¥–∑–∏)</label>
        <input type="text" id="counter-icon" placeholder="üìä">
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –º—É–∑—ã–∫–∏ -->
    <div id="form-music" class="block-form" style="display:none;">
      <div class="form-group">
        <label>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</label>
        <select id="music-platform">
          <option value="spotify">Spotify</option>
          <option value="soundcloud">SoundCloud</option>
        </select>
      </div>
      <div class="form-group" id="spotify-input">
        <label>Spotify Embed ID</label>
        <input type="text" id="music-embedId" placeholder="track/2TpxZ7JUBn3uw46aR7qd6V">
        <small style="color: var(--text-secondary); display: block; margin-top: 5px;">
          –ù–∞–π–¥–∏ —Ç—Ä–µ–∫ –Ω–∞ Spotify ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ç—Ä–µ–∫ ‚Üí –ò—Å–ø–æ–ª—å–∑—É–π ID –ø–æ—Å–ª–µ /track/
        </small>
      </div>
      <div class="form-group" id="soundcloud-input" style="display:none;">
        <label>SoundCloud URL</label>
        <input type="url" id="music-url" placeholder="https://soundcloud.com/artist/track">
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è -->
    <div id="form-divider" class="block-form" style="display:none;">
      <div class="form-group">
        <label>–¢–µ–∫—Å—Ç (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
        <input type="text" id="divider-text" placeholder="–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å">
      </div>
    </div>

    <button class="btn" onclick="addBlock()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫</button>
  </div>

  <!-- –°–ü–ò–°–û–ö –ë–õ–û–ö–û–í -->
  <div class="section">
    <h2>üìã –ë–ª–æ–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</h2>
    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">
      –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π –±–ª–æ–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞
    </p>
    <div id="blocksList"></div>
  </div>

  <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–ú–ò -->
  <div class="section">
    <h2>üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h2>
    
    <div class="btn-group">
      <button class="btn btn-secondary" onclick="exportData()">üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
      <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()">üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
      <input type="file" id="importFile" accept=".json" style="display:none;" onchange="importData(event)">
      <button class="btn btn-danger" onclick="resetData()">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
    </div>
  </div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ
let data = JSON.parse(localStorage.getItem('bioDataPro')) || {
  title: "–ú–æ—ë –±–∏–æ",
  description: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–∂–∞—Ç—å –Ω–∞ –º–æ—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!",
  avatar: "",
  theme: "purple",
  showQR: false,
  blocks: []
};

let editingIndex = -1; // –ò–Ω–¥–µ–∫—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –±–ª–æ–∫–∞

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–≤—ë–∑–¥
function generateStars() {
  const starsContainer = document.getElementById('stars');
  const starCount = 100;
  
  for(let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    star.style.animationDelay = Math.random() * 3 + 's';
    star.style.animationDuration = (Math.random() * 2 + 2) + 's';
    starsContainer.appendChild(star);
  }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
function loadData() {
  document.getElementById('title').value = data.title;
  document.getElementById('description').value = data.description;
  document.getElementById('avatar').value = data.avatar || '';
  document.getElementById('showQR').checked = data.showQR || false;
  
  selectTheme(data.theme || 'purple');
  renderBlocks();
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
function saveMain() {
  data.title = document.getElementById('title').value;
  data.description = document.getElementById('description').value;
  data.avatar = document.getElementById('avatar').value;
  data.showQR = document.getElementById('showQR').checked;
  
  localStorage.setItem('bioDataPro', JSON.stringify(data));
  showAlert('–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
}

// –í—ã–±–æ—Ä —Ç–µ–º—ã
function selectTheme(theme) {
  data.theme = theme;
  document.body.className = 'theme-' + theme;
  localStorage.setItem('bioDataPro', JSON.stringify(data));
  
  document.querySelectorAll('.color-option').forEach(opt => {
    opt.classList.toggle('active', opt.dataset.theme === theme);
  });
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –±–ª–æ–∫–∞
function updateBlockForm() {
  const type = document.getElementById('blockType').value;
  
  // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ñ–æ—Ä–º—ã
  document.querySelectorAll('.block-form').forEach(form => form.style.display = 'none');
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é
  const formId = 'form-' + type;
  const form = document.getElementById(formId);
  if(form) form.style.display = 'block';
  
  // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å—Å—ã–ª–æ–∫
  if(type === 'link') {
    document.getElementById('link-iconType').addEventListener('change', function() {
      const emojiInput = document.getElementById('emoji-input');
      emojiInput.style.display = this.value === 'emoji' ? 'block' : 'none';
    });
  }
  
  // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –º—É–∑—ã–∫–∏
  if(type === 'music') {
    document.getElementById('music-platform').addEventListener('change', function() {
      document.getElementById('spotify-input').style.display = this.value === 'spotify' ? 'block' : 'none';
      document.getElementById('soundcloud-input').style.display = this.value === 'soundcloud' ? 'block' : 'none';
    });
  }
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞
function addBlock() {
  const type = document.getElementById('blockType').value;
  let block = { type };

  switch(type) {
    case 'link':
      const name = document.getElementById('link-name').value.trim();
      const url = document.getElementById('link-url').value.trim();
      const platform = document.getElementById('link-platform').value;
      const iconType = document.getElementById('link-iconType').value;
      const icon = document.getElementById('link-icon').value.trim();
      
      if(!name || !url) return showAlert('–ó–∞–ø–æ–ª–Ω–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ URL!', 'error');
      
      block.name = name;
      block.url = url;
      block.platform = platform;
      block.iconType = iconType;
      if(iconType === 'emoji') block.icon = icon || 'üîó';
      break;

    case 'text':
      const textContent = document.getElementById('text-content').value.trim();
      if(!textContent) return showAlert('–í–≤–µ–¥–∏ —Ç–µ–∫—Å—Ç!', 'error');
      block.content = textContent;
      break;

    case 'quote':
      const quoteContent = document.getElementById('quote-content').value.trim();
      const quoteAuthor = document.getElementById('quote-author').value.trim();
      if(!quoteContent) return showAlert('–í–≤–µ–¥–∏ —Ç–µ–∫—Å—Ç —Ü–∏—Ç–∞—Ç—ã!', 'error');
      block.content = quoteContent;
      if(quoteAuthor) block.author = quoteAuthor;
      break;

    case 'video':
      const videoUrl = document.getElementById('video-url').value.trim();
      const autoplay = document.getElementById('video-autoplay').checked;
      if(!videoUrl) return showAlert('–í–≤–µ–¥–∏ URL –≤–∏–¥–µ–æ!', 'error');
      block.url = videoUrl;
      block.autoplay = autoplay;
      break;

    case 'image':
      const imageUrl = document.getElementById('image-url').value.trim();
      const imageCaption = document.getElementById('image-caption').value.trim();
      if(!imageUrl) return showAlert('–í–≤–µ–¥–∏ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!', 'error');
      block.url = imageUrl;
      if(imageCaption) block.caption = imageCaption;
      break;

    case 'counter':
      const counterLabel = document.getElementById('counter-label').value.trim();
      const counterValue = document.getElementById('counter-value').value.trim();
      const counterIcon = document.getElementById('counter-icon').value.trim();
      if(!counterLabel || !counterValue) return showAlert('–ó–∞–ø–æ–ª–Ω–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ!', 'error');
      block.label = counterLabel;
      block.value = counterValue;
      block.icon = counterIcon || 'üìä';
      break;

    case 'music':
      const musicPlatform = document.getElementById('music-platform').value;
      block.platform = musicPlatform;
      
      if(musicPlatform === 'spotify') {
        const embedId = document.getElementById('music-embedId').value.trim();
        if(!embedId) return showAlert('–í–≤–µ–¥–∏ Spotify Embed ID!', 'error');
        block.embedId = embedId;
      } else {
        const musicUrl = document.getElementById('music-url').value.trim();
        if(!musicUrl) return showAlert('–í–≤–µ–¥–∏ SoundCloud URL!', 'error');
        block.url = musicUrl;
      }
      break;

    case 'divider':
      const dividerText = document.getElementById('divider-text').value.trim();
      if(dividerText) block.text = dividerText;
      break;
  }

  if(editingIndex >= 0) {
    data.blocks[editingIndex] = block;
    editingIndex = -1;
  } else {
    data.blocks.push(block);
  }

  localStorage.setItem('bioDataPro', JSON.stringify(data));
  renderBlocks();
  clearForm();
  showAlert('–ë–ª–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success');
}

// –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
function clearForm() {
  document.getElementById('link-name').value = '';
  document.getElementById('link-url').value = '';
  document.getElementById('link-icon').value = '';
  document.getElementById('text-content').value = '';
  document.getElementById('quote-content').value = '';
  document.getElementById('quote-author').value = '';
  document.getElementById('video-url').value = '';
  document.getElementById('video-autoplay').checked = false;
  document.getElementById('image-url').value = '';
  document.getElementById('image-caption').value = '';
  document.getElementById('counter-label').value = '';
  document.getElementById('counter-value').value = '';
  document.getElementById('counter-icon').value = '';
  document.getElementById('music-embedId').value = '';
  document.getElementById('music-url').value = '';
  document.getElementById('divider-text').value = '';
}

// –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –±–ª–æ–∫–æ–≤
function renderBlocks() {
  const container = document.getElementById('blocksList');
  
  if(data.blocks.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <p>–ë–ª–æ–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å –ø–µ—Ä–≤—ã–π!</p>
      </div>
    `;
    return;
  }

  container.innerHTML = '';
  
  data.blocks.forEach((block, index) => {
    const item = document.createElement('div');
    item.className = 'block-item';
    item.draggable = true;
    item.dataset.index = index;

    let typeLabel = '';
    let content = '';

    switch(block.type) {
      case 'link':
        typeLabel = 'üîó –°—Å—ã–ª–∫–∞';
        content = block.name;
        break;
      case 'text':
        typeLabel = 'üìù –¢–µ–∫—Å—Ç';
        content = block.content.substring(0, 50) + (block.content.length > 50 ? '...' : '');
        break;
      case 'quote':
        typeLabel = 'üí¨ –¶–∏—Ç–∞—Ç–∞';
        content = block.content.substring(0, 50) + (block.content.length > 50 ? '...' : '');
        break;
      case 'video':
        typeLabel = 'üé• –í–∏–¥–µ–æ';
        content = block.url;
        break;
      case 'image':
        typeLabel = 'üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ';
        content = block.caption || block.url;
        break;
      case 'counter':
        typeLabel = 'üìä –°—á—ë—Ç—á–∏–∫';
        content = `${block.label}: ${block.value}`;
        break;
      case 'music':
        typeLabel = 'üéµ –ú—É–∑—ã–∫–∞';
        content = block.platform === 'spotify' ? 'Spotify' : 'SoundCloud';
        break;
      case 'divider':
        typeLabel = '‚ûñ –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å';
        content = block.text || '–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å';
        break;
    }

    item.innerHTML = `
      <div class="block-info">
        <span class="block-type">${typeLabel}</span>
        <div class="block-content">${content}</div>
      </div>
      <div class="block-actions">
        <button class="icon-btn" onclick="moveBlock(${index}, -1)" ${index === 0 ? 'disabled' : ''}>‚Üë</button>
        <button class="icon-btn" onclick="moveBlock(${index}, 1)" ${index === data.blocks.length - 1 ? 'disabled' : ''}>‚Üì</button>
        <button class="icon-btn" onclick="deleteBlock(${index})">üóëÔ∏è</button>
      </div>
    `;

    // Drag and drop
    item.addEventListener('dragstart', handleDragStart);
    item.addEventListener('dragover', handleDragOver);
    item.addEventListener('drop', handleDrop);
    item.addEventListener('dragend', handleDragEnd);

    container.appendChild(item);
  });
}

// –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–∞
function moveBlock(index, direction) {
  const newIndex = index + direction;
  if(newIndex < 0 || newIndex >= data.blocks.length) return;

  [data.blocks[index], data.blocks[newIndex]] = [data.blocks[newIndex], data.blocks[index]];
  
  localStorage.setItem('bioDataPro', JSON.stringify(data));
  renderBlocks();
}

// –£–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞
function deleteBlock(index) {
  if(!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫?')) return;
  
  data.blocks.splice(index, 1);
  localStorage.setItem('bioDataPro', JSON.stringify(data));
  renderBlocks();
  showAlert('–ë–ª–æ–∫ —É–¥–∞–ª—ë–Ω!', 'success');
}

// Drag and Drop
let draggedItem = null;

function handleDragStart(e) {
  draggedItem = this;
  this.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
  e.dataTransfer.setData('text/html', this.innerHTML);
}

function handleDragOver(e) {
  if(e.preventDefault) e.preventDefault();
  e.dataTransfer.dropEffect = 'move';
  return false;
}

function handleDrop(e) {
  if(e.stopPropagation) e.stopPropagation();
  
  if(draggedItem !== this) {
    const fromIndex = parseInt(draggedItem.dataset.index);
    const toIndex = parseInt(this.dataset.index);
    
    const item = data.blocks.splice(fromIndex, 1)[0];
    data.blocks.splice(toIndex, 0, item);
    
    localStorage.setItem('bioDataPro', JSON.stringify(data));
    renderBlocks();
  }
  
  return false;
}

function handleDragEnd() {
  this.classList.remove('dragging');
}

// –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
function exportData() {
  const dataStr = JSON.stringify(data, null, 2);
  const blob = new Blob([dataStr], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'bio-data-' + Date.now() + '.json';
  a.click();
  URL.revokeObjectURL(url);
  showAlert('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
}

// –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
function importData(event) {
  const file = event.target.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = function(e) {
    try {
      const imported = JSON.parse(e.target.result);
      data = imported;
      localStorage.setItem('bioDataPro', JSON.stringify(data));
      loadData();
      showAlert('–î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
    } catch(err) {
      showAlert('–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö!', 'error');
    }
  };
  reader.readAsText(file);
}

// –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
function resetData() {
  if(!confirm('–≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ! –£–≤–µ—Ä–µ–Ω?')) return;
  
  localStorage.removeItem('bioDataPro');
  data = {
    title: "–ú–æ—ë –±–∏–æ",
    description: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –º–æ—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!",
    avatar: "",
    theme: "purple",
    showQR: false,
    blocks: []
  };
  loadData();
  showAlert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—à–µ–Ω—ã!', 'success');
}

// –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showAlert(message, type = 'success') {
  const alert = document.createElement('div');
  alert.className = `alert alert-${type}`;
  alert.textContent = message;
  alert.style.position = 'fixed';
  alert.style.top = '20px';
  alert.style.right = '20px';
  alert.style.zIndex = '1000';
  alert.style.animation = 'fadeInUp 0.3s ease';
  
  document.body.appendChild(alert);
  
  setTimeout(() => {
    alert.style.animation = 'fadeOut 0.3s ease';
    setTimeout(() => alert.remove(), 300);
  }, 3000);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.addEventListener('DOMContentLoaded', () => {
  generateStars();
  loadData();
  updateBlockForm();
});
</script>

<style>
@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-20px); }
}
</style>

</body>
</html>
